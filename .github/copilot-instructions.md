# Copilot Instructions for shuji-learning-system

## 概要
このプロジェクトは「習字学習システム」の制御プログラムです。主にスピーカアレイとプロッタ（GRBL制御）をシリアル通信で操作します。

## 主要構成
- `src/main.py`: メインロジック。シリアルポート選択、ファイル読み込み、命令分岐、デバイス制御（Speaker/Plotterクラス）を実装。
- `src/test.txt`: 命令ファイル例。各行がプロッタやスピーカへの指示。

## データフロー
1. ユーザーがシリアルポートを選択
2. 命令ファイル（例: `test.txt`）を選択
3. 各行の命令をパースし、Speaker/Plotterへ分岐して送信
4. プロッタ座標計算は`Plotter.mapping()`で行う
5. GRBLの状態同期は`Plotter.sync()`で確認

## 命令フォーマット
- `A0 <num> <delay>`: プロッタのホルダー上げ
- `A1/A2 <num> <delay> <param>`: プロッタ座標移動＋スピーカ制御
- `D1 <ms>`: 指定ミリ秒待機
- その他は`main.py`の分岐参照

## 開発・デバッグ
- 実行: `python src/main.py`
- シリアルポートは都度選択（自動検出）
- ファイル選択はカレントディレクトリのファイル一覧から
- エラーは例外表示（`try/except`）
- GRBL応答は`sync()`で`<Idle>`を確認

## 拡張・注意点
- `hoge.py`は未使用。新規機能はここに追加可能
- 命令ファイルはスペース区切り・改行ごとに1命令
- シリアル通信のボーレートは115200固定
- Windows/Mac両対応だが、ポート名の違いに注意

## 参考ファイル
- `README.md`: 概要のみ。詳細は本ファイル参照
- `src/main.py`: 主要ロジックとパターン例
- `src/test.txt`: 命令ファイルサンプル

---

## AIエージェント向けTips
- 命令分岐・座標計算は`main.py`/`Plotter.mapping()`を参照
- 新規命令追加時は`main.py`の分岐ロジックに追記
- デバイス制御は`Speaker`/`Plotter`クラスを拡張
- 例外処理・同期処理は既存パターンを踏襲
